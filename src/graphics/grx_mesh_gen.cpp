#include "grx_mesh_gen.hpp"

using namespace core;

namespace grx {
using namespace mesh_vbo_types;

mesh_buf_t gen_cube(vec3f size) {
    mesh_buf_t data;

    std::get<INDEX_BUF>(data) = vbo_vector_indices{
        0,  1, 2, 3, 4,  5, 6, 7,  8, 9, 10, 11, 12, 13, 14, 15, 16, 17,
        0, 18, 1, 3, 19, 4, 6, 20, 7, 9, 21, 10, 12, 22, 13, 15, 23, 16 };

    std::get<POSITION_BUF>(data) = vbo_vector_vec3f{
        { -1,  1,  1 }, {  1, -1,  1 }, {  1,  1,  1 }, {  1, -1,  1 },
        { -1, -1, -1 }, {  1, -1, -1 }, { -1, -1,  1 }, { -1,  1, -1 },
        { -1, -1, -1 }, {  1,  1, -1 }, { -1, -1, -1 }, { -1,  1, -1 },
        {  1,  1,  1 }, {  1, -1, -1 }, {  1,  1, -1 }, { -1,  1,  1 },
        {  1,  1, -1 }, { -1,  1, -1 }, { -1, -1,  1 }, { -1, -1,  1 },
        { -1,  1,  1 }, {  1, -1, -1 }, {  1, -1,  1 }, {  1,  1,  1 }};

    std::get<UV_BUF>(data) = vbo_vector_vec2f{
        { 0.33313f, 0.9998f  }, { 0.0002f,  0.66686f },
        { 0.0002f,  0.9998f  }, { 0.66686f, 0.66686f },
        { 0.9998f,  0.9998f  }, { 0.9998f,  0.66686f },
        { 0.66646f, 0.3335f  }, { 0.3335f,  0.66646f },
        { 0.66646f, 0.66646f }, { 0.66646f, 0.9998f  },
        { 0.33353f, 0.66686f }, { 0.33353f, 0.9998f  },
        { 0.0002f,  0.0002f  }, { 0.33313f, 0.33313f },
        { 0.33313f, 0.0002f  }, { 0.33313f, 0.33353f },
        { 0.0002f,  0.66646f }, { 0.33313f, 0.66646f },
        { 0.33313f, 0.66686f }, { 0.66686f, 0.9998f  },
        { 0.33353f, 0.33353f }, { 0.66646f, 0.66686f },
        { 0.0002f,  0.33313f }, { 0.0002f,  0.33353f }};

    size *= 0.5f;
    for (auto& vertex : std::get<POSITION_BUF>(data))
        vertex *= size;

    return data;
}

} // namespace grx

